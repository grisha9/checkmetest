CREATE TABLE clinic (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR(255) NOT NULL,
    version BIGINT DEFAULT 0 NOT NULL,
    CONSTRAINT PK_CLINIC PRIMARY KEY (id),
    UNIQUE (name)
    );
CREATE TABLE examination (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR(255) NOT NULL,
    version BIGINT DEFAULT 0 NOT NULL,
    CONSTRAINT PK_EXAMINATION PRIMARY KEY (id),
    UNIQUE (name)
    );

CREATE TABLE examination_price (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    clinic_id BIGINT NOT NULL,
    examination_id BIGINT NOT NULL,
    price INTEGER NOT NULL,
    version BIGINT DEFAULT 0 NOT NULL,
    CONSTRAINT EXAMINATION_PRICE_PKEY PRIMARY KEY (id),
    CONSTRAINT fk_examination_id FOREIGN KEY (examination_id) REFERENCES examination(id) ON DELETE CASCADE,
    CONSTRAINT fk_clinic_id FOREIGN KEY (clinic_id) REFERENCES clinic(id) ON DELETE CASCADE
    );

ALTER TABLE examination_price ADD UNIQUE (clinic_id, examination_id);
